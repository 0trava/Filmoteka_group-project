{"mappings":"YAAA,MAAMA,EAAc,UACdC,EAAY,QAELC,EAYJC,KAAKC,MAAMC,aAAaC,QAAQN,KAZF,GAC1BO,EAcJJ,KAAKC,MAAMC,aAAaC,QAAQL,KAdN,GCAnC,MAAMO,EAAU,mCACVC,EAAU,gCACVC,EAAc,sCAEdC,EAAgBC,SAASC,cAAc,yBACvCC,EAAcF,SAASC,cAAc,uBACrCE,EAAeH,SAASC,cAAc,sBACtCG,EAAUJ,SAASC,cAAc,gBAMvCI,eAAeC,IACb,GAAuB,IAAnBhB,EAAQiB,OAAc,OAE1BH,EAAQI,UAAUC,OAAO,aAEzB,MACMC,EAAcC,QADKC,EAActB,IAGvCc,EAAQI,UAAUK,IAAI,aAEtBC,EAAWJ,EACb,CAyBAL,eAAeO,EAAcG,GAC3B,MAAMC,EAAgBD,EAAME,KAAIC,GAXlCb,eAAgCc,GAC9B,MAAMC,QAAaC,MACjB,GAAGxB,UAAgBsB,aAAmBvB,oBAGlC0B,QAAiBF,EAAKG,OAE5B,OADAC,QAAQC,IAAIH,GACLA,CACT,CAG0CI,CAAiBR,KAEzD,aADyBS,QAAQC,IAAIZ,EAEvC,CAEA,SAASF,EAAWe,GAClB1B,EAAa2B,UAAY,GACzB3B,EAAa4B,mBAAmB,YAAaF,EAC/C,CAEA,SAASlB,EAAWI,GAClB,OAAOA,EAAMiB,QAAO,CAACC,EAAKf,IACjBe,EAIX,SAAsBf,GACpB,MAAO,4CACgCA,EAAKgB,4DACQpC,IAAcoB,EAAKiB,2MAElDjB,EAAKkB,qEAEPlB,EAAKgB,0DAC0BhB,EAAKgB,MAAMhB,EAAKkB,yEACjBlB,EAAKgB,MAAMhB,EAAKmB,eAAenB,EAAKoB,+CAGvF,CAhBiBC,CAAarB,IACzB,GACL,CAvDAnB,EAAcyC,iBAAiB,QAASlC,GACxCJ,EAAYsC,iBAAiB,SAgB7BnC,iBACE,GAAqB,IAAjBV,EAAMY,OAAc,OAExBH,EAAQI,UAAUC,OAAO,aAEzB,MACMC,EAAcC,QADKC,EAAcjB,IAGvCS,EAAQI,UAAUK,IAAI,aAEtBC,EAAWJ,EACb,IA1BA+B,OAAOD,iBAAiB,OAAQlC,E","sources":["src/js/local-storage.js","src/js/watched-queue-run.js"],"sourcesContent":["const KEY_WATCHED = 'watched';\nconst KEY_QUEUE = 'queue';\n\nexport const watched = getWatched() || [];\nexport const queue = getQueue() || [];\n\nexport function setWatched(array) {\n  localStorage.setItem(KEY_WATCHED, JSON.stringify(array));\n}\n\nexport function setQueue(array) {\n  localStorage.setItem(KEY_QUEUE, JSON.stringify(array));\n}\n\nexport function getWatched() {\n  return JSON.parse(localStorage.getItem(KEY_WATCHED));\n}\nexport function getQueue() {\n  return JSON.parse(localStorage.getItem(KEY_QUEUE));\n}\n","import { watched, queue } from './local-storage';\n\n// import { getMovieInfoById } from './api-service';\n\nconst API_KEY = '34e68a416eb051ec4adf34df5a0038fd';\nconst API_URL = `https://api.themoviedb.org/3/`;\nconst API_URL_IMG = `https://image.tmdb.org/t/p/original`;\n\nconst libWatchedBtn = document.querySelector('.library-btn__watched');\nconst libQueueBtn = document.querySelector('.library-btn__queue');\nconst libContainer = document.querySelector('.library-container');\nconst spinner = document.querySelector('.dot-spinner');\n\nlibWatchedBtn.addEventListener('click', onlibWatchedBtnClick);\nlibQueueBtn.addEventListener('click', onlibQueueBtnClick);\nwindow.addEventListener('load', onlibWatchedBtnClick);\n\nasync function onlibWatchedBtnClick() {\n  if (watched.length === 0) return;\n\n  spinner.classList.remove('is-hidden');\n\n  const moviesList = await getMoviesList(watched);\n  const watchedList = createList(moviesList);\n\n  spinner.classList.add('is-hidden');\n\n  renderList(watchedList);\n}\n\nasync function onlibQueueBtnClick() {\n  if (queue.length === 0) return;\n\n  spinner.classList.remove('is-hidden');\n\n  const moviesList = await getMoviesList(queue);\n  const watchedList = createList(moviesList);\n\n  spinner.classList.add('is-hidden');\n\n  renderList(watchedList);\n}\n\nasync function getMovieInfoById(movieID) {\n  const resp = await fetch(\n    `${API_URL}movie/${movieID}?api_key=${API_KEY}&language=en-US`\n  );\n\n  const respData = await resp.json();\n  console.log(respData);\n  return respData;\n}\n\nasync function getMoviesList(array) {\n  const moviePromises = array.map(item => getMovieInfoById(item));\n  const moviesList = await Promise.all(moviePromises);\n  return moviesList;\n}\n\nfunction renderList(data) {\n  libContainer.innerHTML = '';\n  libContainer.insertAdjacentHTML('beforeend', data);\n}\n\nfunction createList(array) {\n  return array.reduce((acc, item) => {\n    return acc + createMarkup(item);\n  }, '');\n}\n\nfunction createMarkup(item) {\n  return `\n            <li class=\"movie-card\"  ID=${item.id}>\n                <img class=\"movie-card__image\" src=\"${API_URL_IMG}${item.poster_path}\" \n                onerror=\"this.onerror=null;this.src='https://thumbs.dreamstime.com/b/атрибуты-кино-вьюрок-фи-ьма-и-во-а-со-ы-в-бумажном-стаканчике-87336791.jpg'\" \n                alt=\"${item.original_title}\" \n                width=\"300\"\n                ID=${item.id}>\n                <h2 class=\"movie-card__name\"   ID=${item.id}>${item.original_title}</h2>\n                <p class=\"movie-card__text\"   ID=${item.id}>${item.genre_ids} | ${item.release_date}</p>\n            </li>\n        `;\n}\n"],"names":["$3791646d3ae2cee8$var$KEY_WATCHED","$3791646d3ae2cee8$var$KEY_QUEUE","$3791646d3ae2cee8$export$e330b7faa493c08b","JSON","parse","localStorage","getItem","$3791646d3ae2cee8$export$4f7fa46ff53e516f","$65ae57d8cd8194df$var$API_KEY","$65ae57d8cd8194df$var$API_URL","$65ae57d8cd8194df$var$API_URL_IMG","$65ae57d8cd8194df$var$libWatchedBtn","document","querySelector","$65ae57d8cd8194df$var$libQueueBtn","$65ae57d8cd8194df$var$libContainer","$65ae57d8cd8194df$var$spinner","async","$65ae57d8cd8194df$var$onlibWatchedBtnClick","length","classList","remove","watchedList","$65ae57d8cd8194df$var$createList","$65ae57d8cd8194df$var$getMoviesList","add","$65ae57d8cd8194df$var$renderList","array","moviePromises","map","item","movieID","resp","fetch","respData","json","console","log","$65ae57d8cd8194df$var$getMovieInfoById","Promise","all","data","innerHTML","insertAdjacentHTML","reduce","acc","id","poster_path","original_title","genre_ids","release_date","$65ae57d8cd8194df$var$createMarkup","addEventListener","window"],"version":3,"file":"library.8b2b23a4.js.map"}
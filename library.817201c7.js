var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},o=e.parcelRequired7c6;null==o&&((o=function(e){if(e in t)return t[e].exports;if(e in n){var o=n[e];delete n[e];var a={id:e,exports:{}};return t[e]=a,o.call(a.exports,a,a.exports),a.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){n[e]=t},e.parcelRequired7c6=o);var a=o("b5rV1"),i=o("fzjuM");const d="34e68a416eb051ec4adf34df5a0038fd",r="https://api.themoviedb.org/3/",s="https://image.tmdb.org/t/p/original",l=document.querySelector(".library-btn__watched"),c=document.querySelector(".library-btn__queue"),u=(document.querySelector(".library-gallery-wrap"),document.querySelector(".library-bg-image")),m=document.querySelector(".library-gallery-box"),_=document.querySelector(".dot-spinner");async function f(){if(0===a.watched.length)return console.log("start"),u.classList.remove("is-hidden"),void(m.innerHTML="");_.classList.remove("is-hidden");const e=p(await v(a.watched));_.classList.add("is-hidden"),h(e)}async function v(e){const t=e.map((e=>async function(e){const t=await fetch(`${r}movie/${e}?api_key=${d}&language=en-US`);return await t.json()}(e)));return await Promise.all(t)}function h(e){u.classList.add("is-hidden"),m.insertAdjacentHTML("beforeend",e)}function p(e){return e.reduce(((e,t)=>e+function(e){let t=(0,i.getGenrelibrary)(e.genres);return`\n            <li class="movie-card"  ID=${e.id}>\n                <img class="movie-card__image" src="${s}${e.poster_path}" \n                onerror="this.onerror=null;this.src='https://thumbs.dreamstime.com/b/атрибуты-кино-вьюрок-фи-ьма-и-во-а-со-ы-в-бумажном-стаканчике-87336791.jpg'" \n                alt="${e.original_title}" \n                width="300"\n                ID=${e.id}>\n                <h2 class="movie-card__name"   ID=${e.id}>${e.original_title}</h2>\n                <p class="movie-card__text"   ID=${e.id}>${t} | ${e.release_date?.substring(0,4)}</p>\n            </li>\n        `}(t)),"")}l.addEventListener("click",f),c.addEventListener("click",(async function(){if(0===a.queue.length)return console.log("start"),u.classList.remove("is-hidden"),void(m.innerHTML="");_.classList.remove("is-hidden");const e=p(await v(a.queue));_.classList.add("is-hidden"),h(e)})),window.addEventListener("load",f),o("gyeM6"),o("baGT8"),o("9tydV");a=o("b5rV1");const y=document.querySelector(".backdrop"),g="34e68a416eb051ec4adf34df5a0038fd",b="https://api.themoviedb.org/3/",w={gallerySelector:document.querySelector(".library-gallery-wrap"),closeButton:document.querySelector(".modal__button-close")};window.addEventListener("keydown",(function(e){"Escape"===e.code&&y.classList.add("is-hidden")})),w.closeButton.addEventListener("click",(function(){y.classList.add("is-hidden")})),w.gallerySelector.addEventListener("click",(async function(e){if(e.preventDefault(),console.log(e.target.nodeName),"UL"===e.target.nodeName)return;y.classList.remove("is-hidden");const t=e.target.id,n=await async function(e){const t=await fetch(`https://api.themoviedb.org/3/movie/${e}?api_key=${g}&language=en-US`);return await t.json()}(t);const o=await async function(e){const t=await fetch(`${b}movie/${e}/videos?api_key=${g}&language=en-US`),n=await t.json();if(console.log(n),n.results.length>0)return n.results[0].key}(t);console.log(o);const i=document.querySelector(".modul-card-to-add");d=i,d.innerHTML=`\n    <div class="modal__poster-thumb">\n          <img class="modal__poster" src="https://image.tmdb.org/t/p/original${n.poster_path}" alt="${n.original_title} poster">\n        </div>\n   \n        <div class="modal__info-thumb">\n            <h2 class="modal__title">${n.original_title}</h2>\n        <table class="modal__info">\n            <tr class="modal__info-entry">\n            <td class="modal__info-key">Vote / Votes</td>\n            <td><span class="modal__info-value-vote modal__info-value-vote--accent">${n.vote_average}</span> / <span class="modal__info-value-vote">${n.vote_count}</span></td>\n            </tr>\n            <tr class="modal__info-entry">\n                <td class="modal__info-key">Popularity</td>\n                <td class="modal__info-value">${n.popularity}</td>\n            </tr>\n            <tr class="modal__info-entry">\n                <td class="modal__info-key">Original Title</td>\n                <td class="modal__info-value modal__info-value-title">${n.original_title}</td>\n        </tr>\n            <tr class="modal__info-entry">\n                <td class="modal__info-key">Genre</td>\n                <td class="modal__info-value">${n.genres.id}</td>\n            </tr>\n        </table>\n\n        <h3 class="modal__about">About</h3>\n        <p class="modal__about-text">${n.overview}</p>\n            <div class="modal__button-container">\n                <button id="watched" type="button" class="modal__button modal__button-watched">add to watched</button>\n                <button id="queue" type="button" class="modal__button modal__button-queue">add to queue</button>\n            </div>\n\n            <div class="modal__button-trailer-wrap">\n                <button id="trailer" type="button" class="modal__button modal__button-trailer">Trailer</button>\n\n                <iframe class="modal__iframe is-hidden" width="1237" height="696" src="https://www.youtube.com/embed/${o}" title="Mia and me - Mia and me Day 2014" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>\n            </div>\n        </div>\n    </div>\n  `,function(){const e=document.querySelector("#watched");a.watched.includes(t)?e.textContent="remove from watched":e.textContent="add to watched"}(),function(){const e=document.querySelector("#queue");a.queue.includes(t)?e.textContent="remove from queue":e.textContent="add to queue"}();var d;const r=document.querySelector("#watched"),s=document.querySelector("#queue");function l(){if(a.watched.includes(t))return a.watched.splice(a.watched.indexOf(t),1),(0,a.setWatched)(a.watched),void(r.textContent="add to watched");a.watched.push(t),(0,a.setWatched)(a.watched),r.textContent="remove from watched"}function c(){if(a.queue.includes(t))return a.queue.splice(a.queue.indexOf(t),1),(0,a.setWatched)(a.queue),void(s.textContent="add to queue");a.queue.push(t),(0,a.setQueue)(a.queue),s.textContent="remove from queue"}r.addEventListener("click",l),s.addEventListener("click",c),window.addEventListener("click",(function e(t){i.contains(event.target)||(console.log("Трейлер на паузі"),document.querySelector("#video").contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*"),y.classList.add("is-hidden"),r.removeEventListener("click",l),s.removeEventListener("click",c),window.removeEventListener("click",e))}));const u=document.querySelector("iframe"),m=document.querySelector("#trailer");console.log(m),m.addEventListener("click",(function(){u.classList.remove("is-hidden"),console.log("кнопка работает")}))}));document.querySelector(".modal");
//# sourceMappingURL=library.817201c7.js.map

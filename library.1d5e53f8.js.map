{"mappings":"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","sources":["src/js/local-storage.js","src/js/modal-genres.js","src/js/rating.js","src/js/watched-queue-run.js","src/js/switch-theme.js","src/js/team-modal.js","src/js/scroll-up-btn.js","src/js/modal-library.js"],"sourcesContent":["const KEY_WATCHED = 'watched';\nconst KEY_QUEUE = 'queue';\n\nexport const watched = getWatched() || [];\nexport const queue = getQueue() || [];\n\nexport function setWatched(array) {\n  localStorage.setItem(KEY_WATCHED, JSON.stringify(array));\n}\n\nexport function setQueue(array) {\n  localStorage.setItem(KEY_QUEUE, JSON.stringify(array));\n}\n\nexport function getWatched() {\n  return JSON.parse(localStorage.getItem(KEY_WATCHED));\n}\nexport function getQueue() {\n  return JSON.parse(localStorage.getItem(KEY_QUEUE));\n}\n","export const genres = [\n  {\n    id: 28,\n    name: 'Action',\n  },\n  {\n    id: 12,\n    name: 'Adventure',\n  },\n  {\n    id: 16,\n    name: 'Animation',\n  },\n  {\n    id: 35,\n    name: 'Comedy',\n  },\n  {\n    id: 80,\n    name: 'Crime',\n  },\n  {\n    id: 99,\n    name: 'Documentary',\n  },\n  {\n    id: 18,\n    name: 'Drama',\n  },\n  {\n    id: 10751,\n    name: 'Family',\n  },\n  {\n    id: 14,\n    name: 'Fantasy',\n  },\n  {\n    id: 36,\n    name: 'History',\n  },\n  {\n    id: 27,\n    name: 'Horror',\n  },\n  {\n    id: 10402,\n    name: 'Music',\n  },\n  {\n    id: 9648,\n    name: 'Mystery',\n  },\n  {\n    id: 10749,\n    name: 'Romance',\n  },\n  {\n    id: 878,\n    name: 'Science Fiction',\n  },\n  {\n    id: 10770,\n    name: 'TV Movie',\n  },\n  {\n    id: 53,\n    name: 'Thriller',\n  },\n  {\n    id: 10752,\n    name: 'War',\n  },\n  {\n    id: 37,\n    name: 'Western',\n  },\n];\n\nexport function getGenre(genres) {\n  return genres.map(genre => genre.name).join(', ');\n}\nexport function getGenrelibrary(genre_ids) {\n  if (!genre_ids) {\n    return;\n  }\n\n  return genre_ids.map(({ name }) => name).join(', ');\n}\n","// Виводить рейтинг фільму\nexport function renderRatingForMovie(starValue, movieId, type) {\n    let str = ``;\n\n    for (let i = 5; i >= 1; i -= 1) {\n        let checked = \"\";\n        if (i === starValue) {\n            checked = \"checked\";\n        }\n        str += ` <input type=\"radio\" id=\"star${i}-${movieId}-${type}\" name=\"rate-${movieId}-${type}\" value=\"${i}\" ${checked}>\n                  <label for=\"star${i}-${movieId}-${type}\" title=\"text\"></label>`;\n    }\n\n   return str;\n}","import { watched, queue } from './local-storage';\nimport { getGenrelibrary } from './modal-genres';\nimport * as rating from './rating';\n\n// import { getMovieInfoById } from './api-service';\n\nconst API_KEY = '34e68a416eb051ec4adf34df5a0038fd';\nconst API_URL = `https://api.themoviedb.org/3/`;\nconst API_URL_IMG = `https://image.tmdb.org/t/p/original`;\nexport let PAGE_OPEN = 1;\n\nconst libWatchedBtn = document.querySelector('.library-btn__watched');\nconst libQueueBtn = document.querySelector('.library-btn__queue');\nconst libContainer = document.querySelector('.library-gallery-wrap');\nconst libBoxinfo = document.querySelector('.library-bg-image');\nconst BoxCard = document.querySelector('.library-gallery-box');\nconst spinner = document.querySelector('.dot-spinner');\n\nlibWatchedBtn.addEventListener('click', onlibWatchedBtnClick);\nlibQueueBtn.addEventListener('click', onlibQueueBtnClick);\nwindow.addEventListener('load', onlibWatchedBtnClick);\n\nlibWatchedBtn.classList.add('active');\n\nlibWatchedBtn.addEventListener('click', () => {\n  libWatchedBtn.classList.add('active');\n  libQueueBtn.classList.remove('active');\n});\n\nlibQueueBtn.addEventListener('click', () => {\n  libQueueBtn.classList.add('active');\n  libWatchedBtn.classList.remove('active');\n});\n\n// НАТИСК на кнопку - Watched\nasync function onlibWatchedBtnClick() {\n  PAGE_OPEN = 1;\n  //console.log(PAGE_OPEN);\n  if (watched.length === 0) {\n   // console.log('start 0');\n    libBoxinfo.classList.remove('is-hidden');\n    BoxCard.innerHTML = ``;\n    return;\n  }\n\n  spinner.classList.remove('is-hidden');\n  spinner.classList.add('is-hidden');\n  //console.log('start watched');\n  //console.log(watched);\n  renderList(watched);\n}\n\n// НАТИСК на кнопку - Queue\nasync function onlibQueueBtnClick() {\n  PAGE_OPEN = 2;\n  //console.log(PAGE_OPEN);\n  if (queue.length === 0) {\n   // console.log('start');\n    libBoxinfo.classList.remove('is-hidden');\n    BoxCard.innerHTML = ` `;\n    return;\n  }\n\n  spinner.classList.remove('is-hidden');\n  spinner.classList.add('is-hidden');\n\n  renderList(queue);\n}\n\nasync function getMovieInfoById(movieID) {\n  const resp = await fetch(\n    `${API_URL}movie/${movieID}?api_key=${API_KEY}&language=en-US`\n  );\n\n  const respData = await resp.json();\n\n  return respData;\n}\n\nasync function getMoviesList(array) {\n  const moviePromises = array.map(item => getMovieInfoById(item));\n  const moviesList = await Promise.all(moviePromises);\n  return moviesList;\n}\n\nexport async function renderList(array) {\n  const moviesList = await getMoviesList(array);\n\n  if (moviesList.length === 0) {\n     //   console.log(\"empty\");\n        // location.reload();\n        libBoxinfo.classList.remove('is-hidden');\n        BoxCard.innerHTML = `<div class=\"library-bg-image is-hidden\">\n            <h2 class=\"library-text\">Sorry, but your list is empty ...</h2>\n            <img\n              src=\"./images/Library/movie.png\"\n              alt=\"cinema\"\n              class=\"js-library-bg-image visually-hidden\"\n              width=\"600\"\n            />\n            </div>`;\n    //  console.log(BoxCard);\n      return;\n  }\n  \n  const watchedList = createList(moviesList);\n  libBoxinfo.classList.add('is-hidden');\n  BoxCard.innerHTML = '';\n  BoxCard.insertAdjacentHTML('beforeend', watchedList);\n}\n\nfunction createList(array) {\n  return array.reduce((acc, item) => {\n    return acc + createMarkup(item);\n  }, '');\n}\n\n// Отримати рейтинг фильма\nfunction getRatingByMovieId(movieId) {\n      const stars = JSON.parse(localStorage.getItem('star')) || [];\n      const id = stars.findIndex(item => parseInt(item.id) === parseInt(movieId));\n\n      if (id !== -1) {\n        return parseInt(stars[id].star);\n      } else {\n        return 0;\n      }\n}\n  \nfunction createMarkup(item) {\n  // console.log(item);\n\n  let genres = getGenrelibrary(item.genres);\n\n  const starValue = getRatingByMovieId(item.id);\n\n  const renderStars = rating.renderRatingForMovie(starValue, item.id, 'list');\n      \n  \n  \n  // let item.year = release_date?.substring(0, 4);\n  return `\n            <li class=\"movie-card\"  ID=${item.id}>\n                <img class=\"movie-card__image\" src=\"${API_URL_IMG}${item.poster_path}\" \n                onerror=\"this.onerror=null;this.src='https://thumbs.dreamstime.com/b/атрибуты-кино-вьюрок-фи-ьма-и-во-а-со-ы-в-бумажном-стаканчике-87336791.jpg'\" \n                alt=\"${item.original_title}\" \n                width=\"300\"\n                ID=${item.id}>\n                <div class=\"library-stars\">\n                <div class=\"rating\">\n                ${renderStars}\n                </div>\n                </div>\n                <h2 class=\"movie-card__name\"   ID=${item.id}>${item.original_title}</h2>\n                <p class=\"movie-card__text\"   ID=${item.id}>${genres} | ${item.release_date?.substring(0, 4)}\n                <span class=\"movie-card__box\">\n                <span class=\"movie-card__average\">${item.vote_average.toFixed([1,])}</span>\n                </span>\n                </p>\n            </li>`;\n}\n\n\n\nwindow.addEventListener('load', () => {\n  if (libWatchedBtn) {\n    libWatchedBtn.checked = true;\n\n    libWatchedBtn.parentNode.classList.add('checked');\n  }\n});\n","const Theme = {\n  LIGHT: 'light-theme',\n  DARK: 'dark-theme',\n  GREY: 'grey-background-theme',\n};\n\nconst body = document.querySelector('body');\nconst footer = document.querySelector('footer');\nconst modal = document.querySelector('#modal');\n\nconst setElementsColor = color => {\n  const elements = document.querySelectorAll('.movie-card__name');\n  const paginator = document.querySelector('.tui-page-btn');\n  for (let i = 0; i < elements.length; i++) {\n    elements[i].style.color = color;\n  }\n};\n\nconst delClassElem = () => {\n  body.classList.remove(Theme.LIGHT, Theme.DARK);\n  footer.classList.remove(Theme.LIGHT, Theme.GREY);\n  modal.classList.remove(Theme.LIGHT, Theme.GREY);\n};\n\nconst setTheme = theme => {\n  if (theme === 'darkTheme') {\n    body.classList.add(Theme.DARK);\n    footer.classList.add(Theme.GREY);\n    modal.classList.add(Theme.GREY);\n\n    setElementsColor('#ffffff');\n  } else {\n    body.classList.add(Theme.LIGHT);\n    modal.classList.add(Theme.LIGHT);\n\n    setElementsColor('#121213f7');\n  }\n};\n\nconst themeSwitcher = document.querySelector('#switcher');\n\nthemeSwitcher.addEventListener('change', () => {\n  const theme = themeSwitcher.checked ? 'darkTheme' : 'lightTheme';\n  localStorage.setItem('Theme', theme);\n  delClassElem();\n  setTheme(theme);\n});\n\nconst savedTheme = localStorage.getItem('Theme');\nif (savedTheme !== null) {\n  themeSwitcher.checked = savedTheme === 'darkTheme';\n  setTheme(savedTheme);\n}\n\nbody.classList.add('animated');","(() => {\n  const refs = {\n    openModalBtn: document.querySelector('[team-modal-open]'),\n    closeModalBtn: document.querySelector('[team-modal-close]'),\n    modal: document.querySelector('[team-modal]'),\n  };\n\n  window.addEventListener('click', clickBackdropCloseModal);\n  window.addEventListener('keydown', closeModalByClickEscape);\n  refs.openModalBtn.addEventListener('click', toggleModal);\n  refs.closeModalBtn.addEventListener('click', toggleModal);\n\n  function clickBackdropCloseModal(e) {\n    if (e.target === refs.modal) {\n      refs.modal.classList.add('is-hidden');\n      document.body.classList.toggle('stop-scrolling');\n    }\n  }\n\n  function closeModalByClickEscape(e) {\n    if (e.code === 'Escape') {\n      refs.modal.classList.add('is-hidden');\n      document.body.classList.toggle('stop-scrolling');\n\n    }\n  }\n\n  function toggleModal() {\n    refs.modal.classList.toggle('is-hidden');\n    document.body.classList.toggle('stop-scrolling');\n  }\n})();\n","const scrollUpBtn = document.querySelector('.scroll-up-btn');\nscrollUpBtn.addEventListener('click', goUp);\nwindow.addEventListener('scroll', trackScroll)\n\nfunction trackScroll() {\n  const offset = window.pageYOffset;\n  const coords = document.documentElement.clientHeight;\n  if (offset > coords) {\n    scrollUpBtn.classList.add('go-up-show');\n  } else {\n    scrollUpBtn.classList.remove('go-up-show');\n  }\n}\n\nfunction goUp() {\n  if (window.pageYOffset > 0) {\n    window.scrollBy(0, -75);\n    setTimeout(goUp, 0);\n  }\n}","// import * as apiService from './api-service';\nimport {\n  watched,\n  queue,\n  getQueue,\n  getWatched,\n  setQueue,\n  setWatched,\n} from './local-storage';\nimport { renderList, PAGE_OPEN } from './watched-queue-run';\nimport { getGenrelibrary } from './modal-genres';\nimport * as rating from './rating';\n\nexport const backdropModal = document.querySelector('.backdrop');\n\nconst API_KEY = '34e68a416eb051ec4adf34df5a0038fd';\nconst API_URL=`https://api.themoviedb.org/3/`;\nconst API_URL_IMG=`https://image.tmdb.org/t/p/original`;\n\n\nconst refs = {\n  backdropModal: document.querySelector('.backdrop'),\n  gallerySelector: document.querySelector('.library-gallery-wrap'),\n  closeButton: document.querySelector('.modal__button-close'),\n  darkerBackdrop: document.querySelector('.darker'),\n  modal: document.querySelector('.modal'),\n};\n\nlet movieId = 0;\n\nwindow.addEventListener('keydown', closeModalHandler);\nwindow.addEventListener('click', clickBackdropCloseModal);\nrefs.closeButton.addEventListener('click', onCloseButton);\nrefs.gallerySelector.addEventListener('click', showCard);\n\n// зачинення по кліку поза модалкою\n\nfunction clickBackdropCloseModal(e) {\n  if (e.target === refs.backdropModal) {\n    onCloseButton(e);\n    // повертаємо скрол\n    document.body.style.overflow = '';\n    refs.darkerBackdrop.classList.add('is-hidden');\n  }\n}\n\n// добавляем обработчик клика на весь документ\n\nfunction closeModalHandler(evt) {\n  if (evt.code === 'Escape') {\n    onCloseButton(evt);\n    // повертаємо скрол\n    document.body.style.overflow = '';\n    refs.darkerBackdrop.classList.add('is-hidden');\n  }\n\n}\n\nfunction onCloseButton(e) {\n  if (e.target === backdropModal || e.code === 'Escape') {\n    backdropModal.classList.add('is-hidden');\n    // повертаємо скрол\n    document.body.style.overflow = '';\n    refs.darkerBackdrop.classList.add('is-hidden');\n  }\n\n  refs.backdropModal.classList.add('is-hidden');\n  // повертаємо скрол\n  document.body.style.overflow = '';\n  refs.darkerBackdrop.classList.add('is-hidden');\n}\n\n\n// КЛІК - по картці\nasync function showCard(e) {\n  e.preventDefault();\n  \n  //console.log(e.target.nodeName);\n  // знімаємо скрол\n  document.body.style.overflow = 'hidden';\n  const darkerBackdrop = document.querySelector('.darker');\n\n  if (e.target.nodeName === 'UL') {\n    return;\n  }\n\n\n  refs.backdropModal.classList.remove('is-hidden');\n\n  if (!e.target.parentNode.classList.contains('rating')) {\n    //console.log('id===='+e.target.id)\n    movieId = e.target.id; // Отримали ID картки на яку був клік\n  }\n  \n\n\n  // Отримуємо дані фільму\n  const movie = await getMovieInfoById(movieId);\n  let genres = getGenrelibrary(movie.genres);\n // console.log(PAGE_OPEN);\n\n  async function getMovieInfoById(movieID) {\n    const resp = await fetch(\n      `https://api.themoviedb.org/3/movie/${movieID}?api_key=${API_KEY}&language=en-US`\n    );\n\n    const respData = await resp.json();\n\n    return respData;\n  }\n\n  // Отримуємо youtube трейлер\n  const youtubeTrailer = await getYoutubeTrailerByMovieId(movieId);\n  //console.log(youtubeTrailer);\n\n  async function getYoutubeTrailerByMovieId(movieId) {\n    const response = await fetch(\n      `${API_URL}movie/${movieId}/videos?api_key=${API_KEY}&language=en-US`\n    );\n\n    const responseData = await response.json();\n    //console.log(responseData);\n\n    if (responseData.results.length > 0) {\n      return responseData['results'][0]['key'];\n    }\n  }\n\n  // Вивід картки фільму\n  const modal = document.querySelector('.modul-card-to-add');\n\n  // Рейтинг фільму\n  const starValue = getRatingByMovieId(movieId);\n\n  createModalCard(modal, starValue);\n  \n  function createModalCard(cardForModal, starValue) {\n    const renderRating = rating.renderRatingForMovie(starValue, movieId, 'modal');\n\n    \n    cardForModal.innerHTML = `\n    <div class=\"modal__poster-thumb\">\n      <img class=\"modal__poster\" src=\"${API_URL_IMG}${movie.poster_path}\" alt=\"${movie.original_title} poster\">\n    </div>\n   \n\n        <div class=\"modal__info-thumb\">\n            <h2 class=\"modal__title\">${movie.original_title}</h2>\n            <div class=\"modal-library_my-rating\">\n            <p class=\"modal-library__info-key\">My rating</p>\n            <div id=\"stars\" class=\"rating\">\n           ${renderRating}\n           </div>\n           </div>\n        <table class=\"modal__info\">\n            <tr class=\"modal__info-entry\">\n            <td class=\"modal__info-key\">Vote / Votes</td>\n            <td><span class=\"modal__info-value-vote modal__info-value-vote--accent\">${movie.vote_average.toFixed([1])}</span> / \n            <span class=\"modal__info-value-vote\">${movie.vote_count}</span></td>\n            </tr>\n            <tr class=\"modal__info-entry\">\n                <td class=\"modal__info-key\">Popularity</td>\n                <td class=\"modal__info-value\">${movie.popularity.toFixed([1,])}</td>\n            </tr>\n            <tr class=\"modal__info-entry\">\n                <td class=\"modal__info-key\">Original Title</td>\n                <td class=\"modal__info-value modal__info-value-title\">${movie.original_title}</td>\n          </tr>\n            <tr class=\"modal__info-entry\">\n                <td class=\"modal__info-key\">Genre</td>\n                <td class=\"modal__info-value\">${genres}</td>\n            </tr>\n        </table>\n\n        <h3 class=\"modal__about\">About</h3>\n        <p class=\"modal__about-text\">${movie.overview}</p>\n            <div class=\"modal__button-container\">\n                <button id=\"watched\" type=\"button\" class=\"modal__button modal__button-watched\">add to watched</button>\n                <button id=\"queue\" type=\"button\" class=\"modal__button modal__button-queue\">add to queue</button>\n            </div>\n\n            <div class=\"modal__button-trailer-wrap\">\n            <button id=\"trailer\" type=\"button\" class=\"modal__button modal__button-trailer\"><span class=\"svg_span\"\n            ><svg width=\"40px\" height=\"40px\" xmlns=\"http://www.w3.org/2000/svg\"  viewBox=\"0 0 72 72\" style=\"vertical-align: bottom;\"><path d=\"M61.115,18.856C63.666,21.503,64,25.709,64,36s-0.334,14.497-2.885,17.144C58.563,55.791,55.906,56,36,56  s-22.563-0.209-25.115-2.856C8.334,50.497,8,46.291,8,36s0.334-14.497,2.885-17.144S16.094,16,36,16S58.563,16.209,61.115,18.856z M31.464,44.476l13.603-8.044l-13.603-7.918V44.476z\"/></svg></span>\n       Trailer</button>\n\n\n                <iframe id=\"video\" class=\"modal__iframe is-hidden\" width=\"100%\" height=\"100%\" src=\"https://www.youtube.com/embed/${youtubeTrailer}?enablejsapi=1\" \n                title=\"Mia and me - Mia and me Day 2014\" frameborder=\"0\" \n                allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\" \n                allowfullscreen></iframe>\n                </div>\n        </div>\n    </div>\n  `;\n\n    // ПЕРЕВІРКА - чи в списку бібліотеки\n\n    onWatchedCheck();\n    onQueueCheck();\n\n    function onWatchedCheck() {\n      const watchedBtn = document.querySelector(`#watched`);\n      //якщо фільм вже в списку\n      if (watched.includes(movieId)) {\n        watchedBtn.textContent = 'remove from watched'; //змінити текст кнопки\n        return;\n      }\n      watchedBtn.textContent = 'add to watched'; //змінити текст кнопки\n    }\n\n    function onQueueCheck() {\n      const queueBtn = document.querySelector('#queue');\n      if (queue.includes(movieId)) {\n        queueBtn.textContent = 'remove from queue';\n        return;\n      }\n\n      queueBtn.textContent = 'add to queue';\n    }\n\n    // Додаємо прослуховувач на рейтинг\n     ratingStars = document.querySelector('#stars');\n     ratingStars.addEventListener('click', onRatingClick);\n    \n     // Зберегти рейтинг\n    function onRatingClick(e) {\n    //  console.log(`Stars=`);\n      const starValue = e.target.value;\n      if (starValue && movieId) {\n\n        const stars = JSON.parse(localStorage.getItem('star')) || [];\n        const id = stars.findIndex(item => item.id === movieId);\n        if (id !== -1) {\n          stars[id].star = starValue;\n        } else {\n          stars.push({'id': movieId, 'star': starValue});\n        }\n      \n        localStorage.setItem('star', JSON.stringify(stars));\n\n        if (PAGE_OPEN === 1){\n          renderList(watched); //оновлюємо сторінку\n        }\n        \n         if (PAGE_OPEN === 2){\n          renderList(queue); //оновлюємо сторінку\n       }\n      }\n    }\n  }\n\n  // Отримати рейтинг фильма\n  function getRatingByMovieId(movieId) {\n      const stars = JSON.parse(localStorage.getItem('star')) || [];\n      const id = stars.findIndex(item => item.id === movieId);\n      if (id !== -1) {\n        return parseInt(stars[id].star);\n      } else {\n        return 0;\n      }\n  }\n\n\t\n\t\n\n  const watchedBtn = document.querySelector(`#watched`);\n  const queueBtn = document.querySelector(`#queue`);\n  // const trailerBtn = document.querySelector(`#trailer`);\n\n  watchedBtn.addEventListener('click', onWatchedClick);\n  queueBtn.addEventListener('click', onQueueClick);\n  // window.addEventListener('click', onWindowClick);\n\n\n  function onWatchedClick() {\n\n\n    //якщо фільм вже в списку\n    if (watched.includes(movieId)) {\n      watched.splice(watched.indexOf(movieId), 1); //видаляємо з масиву айді\n      setWatched(watched); //перезаписуємо сховище\n      watchedBtn.textContent = 'add to watched'; //змінити текст кнопки\n\n      if (PAGE_OPEN === 1){\n        renderList(watched); //оновлюємо сторінку\n      };\n\n      return;\n    }\n\n    watched.push(movieId); //додати в масив айді фільма\n    setWatched(watched); //записати в сховище\n    watchedBtn.textContent = 'remove from watched'; //змінити текст кнопки\n    if (PAGE_OPEN === 1){\n      renderList(watched); //оновлюємо сторінку\n    };\n  }\n\n  function onQueueClick() {\n    if (queue.includes(movieId)) {\n      queue.splice(queue.indexOf(movieId), 1);\n      setQueue(queue);//перезаписуємо сховище\n      queueBtn.textContent = 'add to queue';//змінити текст кнопки\n      // onlibQueueBtnClick(queue);\n      if (PAGE_OPEN === 2){\n        renderList(queue); //оновлюємо сторінку\n      }\n\n      return;\n    }\n\n    queue.push(movieId);\n    setQueue(queue);\n    queueBtn.textContent = 'remove from queue';\n    if (PAGE_OPEN === 2){\n      renderList(queue); //оновлюємо сторінку\n    }\n  }\n\n  function onWindowClick(e) {\n    if (e.target.parentNode.classList.contains('rating')) {\n      return;\n    }\n\n    if (!modal.contains(e.target)) {\n      document\n        .querySelector('#video')\n        .contentWindow.postMessage(\n          '{\"event\":\"command\",\"func\":\"pauseVideo\",\"args\":\"\"}',\n          '*'\n        );\n\n      refs.backdropModal.classList.add('is-hidden');\n      watchedBtn.removeEventListener('click', onWatchedClick);\n      queueBtn.removeEventListener('click', onQueueClick);\n      window.removeEventListener('click', onWindowClick);\n    }\n  }\n\n\n  const modalIframe = document.querySelector('iframe');\n  const trailerBtn = document.querySelector(`#trailer`);\n\n  trailerBtn.addEventListener('click', onTrailerClick);\n\n  function onTrailerClick() {\n    modalIframe.classList.remove('is-hidden');\n    darkerBackdrop.classList.remove('is-hidden');\n\n    watchedBtn.removeEventListener('click', onWatchedClick);\n    queueBtn.removeEventListener('click', onQueueClick);\n  }\n\n\n  darkerBackdrop.addEventListener('click', onDarkerClick);\n\n  function onDarkerClick(e) {\n    if (e.target === modalIframe) {\n      return;\n    }\n\n\n    if (!modal.contains(e.target)) {\n     // console.log('Трейлер на паузі');\n      document.querySelector('#video').contentWindow.postMessage('{\"event\":\"command\",\"func\":\"pauseVideo\",\"args\":\"\"}','*');\n      darkerBackdrop.classList.add('is-hidden');\n      modalIframe.classList.add('is-hidden');\n\n       watchedBtn.addEventListener('click', onWatchedClick);\n      queueBtn.addEventListener('click', onQueueClick);\n    }\n  }\n\n};\n\n\n\n"],"names":["$8125d1701b78b442$var$KEY_WATCHED","$8125d1701b78b442$var$KEY_QUEUE","$8125d1701b78b442$export$e330b7faa493c08b","JSON","parse","localStorage","getItem","$8125d1701b78b442$export$4f7fa46ff53e516f","$8125d1701b78b442$export$3547c30566e73dea","array","setItem","stringify","$8125d1701b78b442$export$99c5a435ab253916","$a2a1a8ef956f7202$export$3917d349733aaf59","genre_ids","map","name","join","$db7986df53840967$export$3c35769c259055bf","starValue","movieId","type","str","i","checked","$bee345328e2e2240$var$API_KEY","$bee345328e2e2240$var$API_URL","$bee345328e2e2240$var$API_URL_IMG","$bee345328e2e2240$export$c4328c96217f7292","$bee345328e2e2240$var$libWatchedBtn","document","querySelector","$bee345328e2e2240$var$libQueueBtn","$bee345328e2e2240$var$libBoxinfo","$bee345328e2e2240$var$BoxCard","$bee345328e2e2240$var$spinner","async","$bee345328e2e2240$var$onlibWatchedBtnClick","length","classList","remove","innerHTML","add","$bee345328e2e2240$export$4bf387f59bfc6d67","$bee345328e2e2240$var$getMoviesList","moviePromises","item","movieID","resp","fetch","json","$bee345328e2e2240$var$getMovieInfoById","Promise","all","moviesList","watchedList","reduce","acc","genres","stars","id","findIndex","parseInt","star","$bee345328e2e2240$var$getRatingByMovieId","renderStars","poster_path","original_title","release_date","substring","vote_average","toFixed","$bee345328e2e2240$var$createMarkup","$bee345328e2e2240$var$createList","insertAdjacentHTML","addEventListener","window","parentNode","$c0cb484ed29a65f5$var$Theme","$c0cb484ed29a65f5$var$body","$c0cb484ed29a65f5$var$footer","$c0cb484ed29a65f5$var$modal","$c0cb484ed29a65f5$var$setElementsColor","color","elements","querySelectorAll","style","$c0cb484ed29a65f5$var$setTheme","theme","$c0cb484ed29a65f5$var$themeSwitcher","$c0cb484ed29a65f5$var$savedTheme","refs","openModalBtn","closeModalBtn","modal","toggleModal","toggle","body","e","target","code","$6e615e981b554d80$var$scrollUpBtn","$6e615e981b554d80$var$goUp","pageYOffset","scrollBy","setTimeout","offset","coords","documentElement","clientHeight","$2631b5b1e00936b8$export$fe5a587e213b42e1","$2631b5b1e00936b8$var$API_KEY","$2631b5b1e00936b8$var$API_URL","$2631b5b1e00936b8$var$refs","backdropModal","gallerySelector","closeButton","darkerBackdrop","$2631b5b1e00936b8$var$movieId","$2631b5b1e00936b8$var$onCloseButton","overflow","evt","preventDefault","nodeName","contains","movie","getMovieInfoById","youtubeTrailer","response","responseData","results","getYoutubeTrailerByMovieId","getRatingByMovieId","cardForModal","renderRating","vote_count","popularity","overview","watchedBtn","includes","textContent","onWatchedCheck","queueBtn","onQueueCheck","ratingStars","value","push","createModalCard","onWatchedClick","splice","indexOf","onQueueClick","modalIframe","removeEventListener","contentWindow","postMessage"],"version":3,"file":"library.1d5e53f8.js.map"}